<script type="text/javascript" src="/core/public/js/jqueryui.js"></script>
<link href="/FormBuilder/public/css/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="/FormBuilder/public/css/calendar.css" rel="stylesheet" type="text/css">

<style>
    a[data-title]:hover:after {
        content: attr(data-title);
        padding: 4px 8px;
        color: #333;
        position: absolute;
        left: 0;
        top: 100%;
        z-index: 20;
        white-space: nowrap;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        border-radius: 5px;
        -moz-box-shadow: 0px 0px 4px #222;
        -webkit-box-shadow: 0px 0px 4px #222;
        box-shadow: 0px 0px 4px #222;
        background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
        background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #eeeeee),color-stop(1, #cccccc));
        background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);
        background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
        background-image: -ms-linear-gradient(top, #eeeeee, #cccccc);
        background-image: -o-linear-gradient(top, #eeeeee, #cccccc);
    }
</style>

<?php
$colours = array("1" => "red",
    "2" => "green",
    "3" => "#3b91ad",
    "finished" => "orange");

$priorities = array(1 => "High",
    2 => "Medium",
    3 => "Low"
);
?>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-8">
        <h2>Calendar</h2>
        <ol class="breadcrumb">
            <li>
                <a href="index.html">Home</a>
            </li>
            <li>
                Extra pages
            </li>
            <li class="active">
                <strong>Calendar</strong>
            </li>
        </ol>
    </div>
</div>

<div class="ibox-content m-b-sm border-bottom teamMembersBox" style="margin-top:15px;">

    <?php
    $i = 0;
    echo '<div class="row">'
    . '<div class="col-lg-12 pull-left">';
    foreach ($arrUsers as $arrTeam) {
        echo '<div class="col-md-4">';
        ?>
        <h3><?= $arrTeam['team_name'] ?></h3>

        <div class="row">

            <?php
            $intCount2 = 0;
            foreach ($arrTeam['users'] as $arrUser):
                ?>

                <div class="col-md-4">
                    <div class="project-requestor col-lg-4 col-xs-4 text-center">
                        <div class="img-circle-wrapper-small" user="<?= $arrUser['username'] ?>">
                            <div class="backgound-image-trick-small" style="background-image : url('/FormBuilder/public/img/users/ <?= $arrUser['username'] ?>.jpeg')" ></div>
                        </div>

                        <small><?= $arrUser["username"] ?><br>Manager</small>
                    </div>
                </div>
                <?php
                $intCount2++;

                if ( $intCount2 % 4 == 0 )
                {
                    echo '</div><div class="row">';
                }


            endforeach;
            ?>
        </div>

    </div>
    <?php
    $i++;
    if ( $i % 3 == 0 )
    {
        echo '</div></div><div class="row"><div class="col-lg-12 pull-left">';
    }
}
?>
</div></div><br/>

<div class="row">
    <div class="col-sm-4">
        <div class="form-group">
            <label class="control-label" for="order_id">Department</label>
            <select id="departmentId" name="departmentId" class="form-control">
                <option value="">Select One</option>
                <?php foreach ($departments as $department): ?>
                    <option value="<?= $department['id'] ?>"><?= $department['department'] ?></option>

                <?php endforeach; ?>
            </select>
        </div>
    </div>
</div>
</div>





<div class="wrapper wrapper-content">
    <div class="row animated fadeInDown">
        <div class="col-lg-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Draggable Events</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div id="external-events">

                        <?php foreach ($externalEvents as $externalEvent): 
                          $acceptedBy = empty($externalEvent['accepted_by']) ? 'disable' : '';
                            ?>
                            <div data-title="<?= $externalEvent['title'] ?>" days="<?= $externalEvent['days'] ?>" id="<?= $externalEvent['id'] ?>" class="external-event <?= $acceptedBy ?> navy-bg" style="position: relative; background-color:<?= $colours[$externalEvent['class']] ?>">
                                <div class="fc-content">
                                    <span class="fc-title">
                                        <div class="teamLabel" style="float:left; width:100%;"></div>
                                        <div style="width:100%;"> <?= $externalEvent['title'] ?>
                                            <span style="margin-left:2%;"> <?= $priorities[$externalEvent['class']] ?></span>
                                        </div>
                                    </span>
                                </div>
                            </div>
                        <?php endforeach ?>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-lg-9">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Striped Table </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content calendar">



                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal inmodal in" id="assignTeam" tabindex="-1" role="dialog" aria-hidden="true" style="display: none; padding-right: 17px;">
    <div class="modal-dialog">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Assign Team Member</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <input type="hidden" id="selectedEvent" name="selectedEvent" value="">
                    <input type="hidden" id="selectedDate" name="selectedDate" value="">
                    <input type="hidden" id="selectedDays" name="selectedDays" value="">
                    <label>Team Member</label> 
                    <select id="teamMember" name="teamMember" class="form-control">
                        <option value="">Select</option>
                        <?php foreach ($arrAllUsers as $arrUser): ?>
                            <option deptid="<?= $arrUser['dept_id'] ?>" teamid="<?= $arrUser['team_id'] ?>" value="<?= $arrUser['username'] ?>"><?= $arrUser['username'] ?></option>
                        <?php endforeach; ?>
                    </select>


                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary assign">Assign</button>
            </div>
        </div>
    </div>
</div>

<div class="modal inmodal" id="taskSummary" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">

</div>

<script src="/FormBuilder/public/js/calendar.js" type="text/javascript"></script>